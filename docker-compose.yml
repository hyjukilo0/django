version: '3'

services:
    db:
        image: postgres
        ports:
          - "5432:5432" 
        environment:
          - POSTGRES_DB=postgres
          - POSTGRES_USER=postgres
          - POSTGRES_PASSWORD=postgres
    django:
        build: ./main
        command: ["python", "manage.py", "runserver", "0.0.0.0:8000"]
        volumes:
          - ./api:/app/main
        ports:
          - "8000:8000"
        depends_on:
          - db
    frontend:
        build: ./frontend
        command: ["npm", "start"]
        volumes:
          - ./frontend:/app/frontend
          - /app/frontend/node_modules